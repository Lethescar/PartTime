{"remainingRequest":"G:\\PartTime\\App\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!G:\\PartTime\\App\\src\\views\\Chatroom.vue?vue&type=style&index=0&id=5f0fe8ed&scoped=true&lang=css&","dependencies":[{"path":"G:\\PartTime\\App\\src\\views\\Chatroom.vue","mtime":1587452291494},{"path":"G:\\PartTime\\App\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"G:\\PartTime\\App\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"G:\\PartTime\\App\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"G:\\PartTime\\App\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"G:\\PartTime\\App\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoNCi5jaGF0cm9vbS10aXRsZXsNCiAgbWFyZ2luLXRvcDogMTVweDsNCn0NCi5jaGF0cm9vbS10aXRsZSBwew0KICBjb2xvcjogb3JhbmdlOw0KfQ0KLm5leHR7DQogIHdpZHRoOiAyLjVyZW07DQogIHRleHQtYWxpZ246IGxlZnQ7DQogIGNvbG9yOm9yYW5nZTsNCiAgcG9zaXRpb246IGFic29sdXRlOw0KICB0b3A6MS4ycmVtOw0KICBsZWZ0OiAxcmVtOw0KfQ0KLmNoYXRib3R0b20tYm94ew0KICBwb3NpdGlvbjogZml4ZWQ7DQogIHJpZ2h0OiAwOw0KICBib3R0b206IDA7DQogIGxlZnQ6IDA7DQogIGRpc3BsYXk6IGZsZXg7DQogIGhlaWdodDogNDBweDsNCiAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZjsNCiAgbWFyZ2luOiAxMHB4IDEuMnJlbTsNCn0NCi5jaGF0aW5wdXR7DQogIHdpZHRoOiA4MCU7DQogIGJhY2tncm91bmQ6IG5vbmU7DQogIG91dGxpbmU6IG5vbmU7DQogIGJvcmRlcjogMXB4IHNvbGlkIG9yYW5nZTsNCiAgYm9yZGVyLXJhZGl1czogMjBweDsNCiAgcGFkZGluZzogOHB4IDE1cHggMCAxNXB4Ow0KICByZXNpemU6bm9uZTsNCiAgb3ZlcmZsb3c6aGlkZGVuOw0KfQ0KLmNoYXRzZW5kew0KICB3aWR0aDogMjAlOw0KICBsaW5lLWhlaWdodDogNDBweDsNCiAgZGlzcGxheTogaW5saW5lLWJsb2NrOw0KICBiYWNrZ3JvdW5kOiBsaW5lci1yZ2FkaWVudDsNCiAgYmFja2dyb3VuZC1pbWFnZTogbGluZWFyLWdyYWRpZW50KHRvIHJpZ2h0LCByZ2IoMjU1LCAyMDAsIDc1LDAuNTApLCByZ2IoMjQ2LCA3MywgMTUzLDAuNTApKTsNCiAgYm9yZGVyLXJhZGl1czogMjBweDsNCiAgdGV4dC1kZWNvcmF0aW9uOiBub25lOw0KICBjb2xvcjogdG9tYXRvOw0KfQ0KLmNoYXRzZW5kOmFjdGl2ZXsNCiAgYmFja2dyb3VuZC1pbWFnZTogbGluZWFyLWdyYWRpZW50KHRvIHJpZ2h0LCByZ2IoMjU1LCAyMDAsIDc1LDAuODApLCByZ2IoMjQ2LCA3MywgMTUzLDAuODApKTsNCn0NCi5tc2dpdGVtew0KICBkaXNwbGF5OiBmbGV4Ow0KfQ0KLm1zZ2l0ZW0gLnBlcnNvbi1pY29uew0KICB3aWR0aDogNDBweDsNCiAgaGVpZ2h0OiA0MHB4Ow0KICBib3JkZXItcmFkaXVzOiA1MCU7DQogIGJhY2tncm91bmQtc2l6ZTogY292ZXI7DQogIGJhY2tncm91bmQtcmVwZWF0OiBuby1yZXBlYXQ7DQp9DQoubXNnaXRlbSAubXNnew0KICBwb3NpdGlvbjogcmVsYXRpdmU7DQogIHdvcmQtYnJlYWs6IGJyZWFrLXdvcmQ7DQogIHRleHQtYWxpZ246IGxlZnQ7DQogIG1heC13aWR0aDogNzAlOw0KICBsaW5lLWhlaWdodDogMjVweDsNCiAgZGlzcGxheTogaW5saW5lLXRhYmxlOw0KICBtYXJnaW4tdG9wOiA4cHg7DQogIG1hcmdpbi1sZWZ0OiAxNnB4Ow0KICBib3JkZXItcmFkaXVzOiAxMHB4Ow0KICBwYWRkaW5nOiAycHggOHB4IDJweCA4cHg7DQp9DQo="},{"version":3,"sources":["Chatroom.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Chatroom.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n  <div class=\"container\">\r\n    <div>\r\n      <div style=\"text-align: left;\">\r\n        <a href=\"javascript:history.go(-1);\">\r\n          <van-icon name=\"arrow-left\" class=\"next\"/>\r\n        </a>\r\n      </div>\r\n      <div class=\"chatroom-title\">\r\n        <p>工作咨询</p>\r\n      </div>\r\n    </div>\r\n    <div class=\"chatbottom-box\">\r\n      <textarea cols=\"30\" rows=\"3\" class=\"chatinput\" v-model=\"msg\"></textarea>\r\n      <a href=\"javascript:;\" class=\"chatsend\" @click=\"sendMsg\">发送</a>\r\n    </div>\r\n    <div class=\"chatcontainer\">\r\n      <ul class=\"msgbox\">\r\n        <li class=\"msgitem\" v-for=\"(item,index) in msgarr\" :key=\"index\">\r\n          <div class=\"person-icon\" :style=\"infolist.head_icon==null ? 'background-color: darkgrey;' : {backgroundImage:'url('+'http://127.0.0.1:8000'+infolist.head_icon+')'}\"></div>\r\n          <div class=\"msg\" :style=\"{'background':rgb()}\" v-text=\"item.msg\"></div>\r\n        </li>\r\n      </ul>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      infolist:[],\r\n      msg:'',\r\n      msgArr:[],\r\n      msgarr:[]\r\n    }\r\n  },\r\n  created() {\r\n    this.getinfolist()\r\n    this.getmsgarr()\r\n  },\r\n  mounted() {\r\n    \r\n  },\r\n  methods: {\r\n    rgb(){\r\n      var r = Math.floor(Math.random()*256);\r\n      var g = Math.floor(Math.random()*256);\r\n      var b = Math.floor(Math.random()*256);\r\n      return `rgb(${r},${g},${b},0.30)`\r\n    },\r\n    getinfolist(){\r\n      var ild=localStorage.getItem('ild');\r\n      var url=\"user/infolist\";\r\n      (async ()=>{\r\n        var result=await this.axios.get(\r\n          url,\r\n          {params:{ild:ild}}\r\n        );\r\n        this.infolist=result.data[0];\r\n        // console.log(this.infolist);\r\n      })();\r\n    },\r\n    sendMsg(){\r\n      var socket = io(\"ws://127.0.0.1:3000\");\r\n      socket.emit('sendMsgToServe',{\r\n        msg:this.msg\r\n      })\r\n      this.msg='';\r\n      socket.on('getMsgFromServe',msgObj=>{\r\n        this.msgarr.push(msgObj)\r\n        var riid=localStorage.getItem('ild');\r\n        var id=this.$route.params.id;\r\n        var msgitem=msgObj;\r\n        // console.log(msgitem);\r\n        var url=\"user/msgitem\";\r\n        (async ()=>{\r\n          var result=await this.axios.get(\r\n            url,\r\n            {params:{riid:riid,id:id,msg:msgitem.msg}}\r\n          );\r\n          // console.log(result)\r\n        })();\r\n      })\r\n    },\r\n    getmsgarr(){\r\n      var url=\"user/msgarr\";\r\n      var riid=localStorage.getItem('ild');\r\n      (async ()=>{\r\n        var result=await this.axios.get(\r\n          url,\r\n          {params:{riid:riid,id:this.$route.params.id}}\r\n        );\r\n        if(result.data.length>0){\r\n          this.msgarr = result.data;\r\n          console.log(this.msgarr)\r\n        }\r\n      })();\r\n    }\r\n  },\r\n}\r\n</script>\r\n<style scoped>\r\n.chatroom-title{\r\n  margin-top: 15px;\r\n}\r\n.chatroom-title p{\r\n  color: orange;\r\n}\r\n.next{\r\n  width: 2.5rem;\r\n  text-align: left;\r\n  color:orange;\r\n  position: absolute;\r\n  top:1.2rem;\r\n  left: 1rem;\r\n}\r\n.chatbottom-box{\r\n  position: fixed;\r\n  right: 0;\r\n  bottom: 0;\r\n  left: 0;\r\n  display: flex;\r\n  height: 40px;\r\n  background-color: #fff;\r\n  margin: 10px 1.2rem;\r\n}\r\n.chatinput{\r\n  width: 80%;\r\n  background: none;\r\n  outline: none;\r\n  border: 1px solid orange;\r\n  border-radius: 20px;\r\n  padding: 8px 15px 0 15px;\r\n  resize:none;\r\n  overflow:hidden;\r\n}\r\n.chatsend{\r\n  width: 20%;\r\n  line-height: 40px;\r\n  display: inline-block;\r\n  background: liner-rgadient;\r\n  background-image: linear-gradient(to right, rgb(255, 200, 75,0.50), rgb(246, 73, 153,0.50));\r\n  border-radius: 20px;\r\n  text-decoration: none;\r\n  color: tomato;\r\n}\r\n.chatsend:active{\r\n  background-image: linear-gradient(to right, rgb(255, 200, 75,0.80), rgb(246, 73, 153,0.80));\r\n}\r\n.msgitem{\r\n  display: flex;\r\n}\r\n.msgitem .person-icon{\r\n  width: 40px;\r\n  height: 40px;\r\n  border-radius: 50%;\r\n  background-size: cover;\r\n  background-repeat: no-repeat;\r\n}\r\n.msgitem .msg{\r\n  position: relative;\r\n  word-break: break-word;\r\n  text-align: left;\r\n  max-width: 70%;\r\n  line-height: 25px;\r\n  display: inline-table;\r\n  margin-top: 8px;\r\n  margin-left: 16px;\r\n  border-radius: 10px;\r\n  padding: 2px 8px 2px 8px;\r\n}\r\n</style>"]}]}